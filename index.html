<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Meta Tags SEO Ottimizzati -->
    <title>Cyber Threat Intelligence Hub | Notizie Sicurezza Informatica Tradotte</title>
    <meta name="description" content="Aggregatore di notizie su cybersecurity, hacking etico e vulnerabilit√† con traduzione automatica. Fonti attendibili: SecurityInfo, KrebsOnSecurity, The Hacker News">
    <meta name="keywords" content="sicurezza informatica, hacker news, malware, vulnerabilit√†, hacking etico, traduzione automatica, notizie cybersecurity">
    <meta name="author" content="Michele Balzano">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Social Media Tags -->
    <meta property="og:title" content="Cyber Threat Intelligence Hub">
    <meta property="og:description" content="Le ultime notizie sulla sicurezza informatica tradotte in italiano da fonti globali">
    <meta property="og:url" content="https://cyber-news-aggregator.netlify.app/">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://cyber-news-aggregator.netlify.app/preview-image.png">
    
    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Google Analytics -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EZDWXBLCFG"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-EZDWXBLCFG');
    </script>
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 40px;
            font-style: italic;
        }
        .controls {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }
        .feed-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }
        .feed-column {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            padding: 20px;
            transition: transform 0.3s ease;
        }
        .feed-column:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .feed-title {
            font-size: 1.4em;
            color: #3498db;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .feed-title img {
            width: 24px;
            height: 24px;
            border-radius: 50%;
        }
        .feed-item {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #eee;
        }
        .item-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.1em;
        }
        .item-title a {
            color: inherit;
            text-decoration: none;
            transition: color 0.2s;
        }
        .item-title a:hover {
            color: #3498db;
            text-decoration: underline;
        }
        .item-date {
            font-size: 0.85em;
            color: #7f8c8d;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .item-date::before {
            content: "üìÖ";
            font-size: 0.9em;
        }
        .item-description {
            font-size: 0.95em;
            color: #555;
            line-height: 1.5;
        }
        .item-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        .tag {
            background-color: #e1f5fe;
            color: #0288d1;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.75em;
            font-weight: 500;
        }
        .tag.lang {
            background-color: #e8f5e9;
            color: #388e3c;
        }
        .loading {
            text-align: center;
            padding: 30px;
            font-style: italic;
            color: #7f8c8d;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .error {
            color: #e74c3c;
            font-style: italic;
            padding: 15px;
            background-color: #fdecea;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        .fallback-link {
            margin-top: 10px;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #2980b9;
        }
        button.secondary {
            background-color: #ecf0f1;
            color: #333;
        }
        button.secondary:hover {
            background-color: #d5dbdb;
        }
        button.active {
            background-color: #2c3e50;
            color: white;
        }
        .translate-info {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-top: 5px;
            font-style: italic;
        }
        @media (max-width: 768px) {
            .feed-container {
                grid-template-columns: 1fr;
            }
            .controls {
                justify-content: flex-start;
            }
        }
    </style>
</head>
<body>
    <h1>Cyber Threat Intelligence Hub</h1>
    <div class="subtitle">Notizie tradotte su malware, vulnerabilit√† e sicurezza informatica</div>
    
    <div class="controls">
        <div class="category-filter" id="categoryFilter">
            <button class="active" data-category="all">Tutte</button>
            <button data-category="italia">Italia</button>
            <button data-category="global">Global</button>
            <button data-category="malware">Malware</button>
            <button data-category="vulnerabilita">Vulnerabilit√†</button>
            <button data-category="hacking">Hacking</button>
        </div>
        <button id="translateToggle" class="secondary">Attiva traduzione automatica</button>
    </div>
    
    <div class="feed-container" id="feedContainer">
        <!-- Le colonne dei feed verranno aggiunte dinamicamente via JavaScript -->
    </div>

    <script>
        // Configurazione
        const TRANSLATE_ENABLED = false;
        const DEEPL_API_KEY = '';
        const TRANSLATION_CACHE = new Map();
        
        // Fonti di notizie VERIFICATE e funzionanti
        const CYBER_NEWS_SOURCES = [
            // Fonti italiane
            {
                id: "securityinfo",
                name: "SecurityInfo",
                rss: "https://www.securityinfo.it/feed/",
                fallback: "https://www.securityinfo.it",
                icon: "https://www.securityinfo.it/wp-content/themes/securityinfo/img/favicon.ico",
                category: "italia",
                tags: ["sicurezza", "hacking", "vulnerabilit√†"],
                lang: "it"
            },
            {
                id: "redhotcyber",
                name: "Red Hot Cyber",
                rss: "https://www.redhotcyber.com/feed/",
                fallback: "https://www.redhotcyber.com",
                icon: "https://www.redhotcyber.com/wp-content/uploads/2021/09/cropped-RHC-32x32.png",
                category: "italia",
                tags: ["threat intelligence", "malware", "cybercrime"],
                lang: "it"
            },
            {
                id: "certagid",
                name: "CERT-AGID",
                rss: "https://cert-agid.gov.it/feed/",
                fallback: "https://cert-agid.gov.it",
                icon: "https://cert-agid.gov.it/wp-content/uploads/2021/12/cropped-favicon-32x32.png",
                category: "italia",
                tags: ["vulnerabilit√†", "patch", "sicurezza nazionale"],
                lang: "it"
            },
            
            // Fonti internazionali VERIFICATE
            {
                id: "krebs",
                name: "KrebsOnSecurity",
                rss: "https://krebsonsecurity.com/feed/",
                fallback: "https://krebsonsecurity.com",
                icon: "https://krebsonsecurity.com/favicon.ico",
                category: "global",
                tags: ["cybercrime", "investigazioni", "data breaches"],
                lang: "en"
            },
            {
                id: "thn",
                name: "The Hacker News",
                rss: "https://feeds.feedburner.com/TheHackersNews",
                fallback: "https://thehackernews.com",
                icon: "https://thehackernews.com/favicon.ico",
                category: "global",
                tags: ["hacking", "malware", "vulnerabilit√†"],
                lang: "en"
            },
            {
                id: "bleeping",
                name: "BleepingComputer",
                rss: "https://www.bleepingcomputer.com/feed/",
                fallback: "https://www.bleepingcomputer.com",
                icon: "https://www.bleepingcomputer.com/favicon.ico",
                category: "global",
                tags: ["malware", "ransomware", "zero-day"],
                lang: "en"
            },
            {
                id: "darkreading",
                name: "Dark Reading",
                rss: "https://www.darkreading.com/rss.xml",
                fallback: "https://www.darkreading.com",
                icon: "https://www.darkreading.com/favicon.ico",
                category: "global",
                tags: ["enterprise security", "threat intelligence", "vulnerabilities"],
                lang: "en"
            },
            {
                id: "zdnet",
                name: "ZDNet Security",
                rss: "https://www.zdnet.com/news/rss.xml",
                fallback: "https://www.zdnet.com/topic/security/",
                icon: "https://www.zdnet.com/favicon.ico",
                category: "global",
                tags: ["cybersecurity", "hacks", "data protection"],
                lang: "en"
            },
            {
                id: "infosecurity",
                name: "Infosecurity Magazine",
                rss: "https://www.infosecurity-magazine.com/rss/news/",
                fallback: "https://www.infosecurity-magazine.com",
                icon: "https://www.infosecurity-magazine.com/favicon.ico",
                category: "global",
                tags: ["enterprise security", "risk management", "compliance"],
                lang: "en"
            },
            {
                id: "securityweek",
                name: "SecurityWeek",
                rss: "https://feeds.feedburner.com/securityweek",
                fallback: "https://www.securityweek.com",
                icon: "https://www.securityweek.com/favicon.ico",
                category: "global",
                tags: ["cyber threats", "vulnerabilities", "security research"],
                lang: "en"
            },
            {
                id: "cyberscoop",
                name: "CyberScoop",
                rss: "https://www.cyberscoop.com/feed/",
                fallback: "https://www.cyberscoop.com",
                icon: "https://www.cyberscoop.com/wp-content/uploads/2019/08/cropped-favicon-32x32.png",
                category: "global",
                tags: ["cyber policy", "government", "threat intelligence"],
                lang: "en"
            },
            {
                id: "mandiant",
                name: "Mandiant Threat Intelligence",
                rss: "https://www.mandiant.com/resources/blog/rss.xml",
                fallback: "https://www.mandiant.com/resources/blog",
                icon: "https://www.mandiant.com/sites/default/files/favicon.ico",
                category: "global",
                tags: ["threat research", "malware analysis", "vulnerabilities"],
                lang: "en"
            },
            {
                id: "schneier",
                name: "Schneier on Security",
                rss: "https://www.schneier.com/feed/atom/",
                fallback: "https://www.schneier.com",
                icon: "https://www.schneier.com/wp-content/themes/schneier/assets/favicon.ico",
                category: "global",
                tags: ["cryptography", "privacy", "security policy"],
                lang: "en"
            },
            {
                id: "threatpost",
                name: "Threatpost",
                rss: "https://threatpost.com/feed/",
                fallback: "https://threatpost.com",
                icon: "https://threatpost.com/wp-content/uploads/sites/103/2021/07/Threatpost-Favicon.png",
                category: "global",
                tags: ["malware", "vulnerabilities", "zero-day"],
                lang: "en"
            },
            {
                id: "welivesecurity",
                name: "WeLiveSecurity",
                rss: "https://www.welivesecurity.com/feed/",
                fallback: "https://www.welivesecurity.com",
                icon: "https://www.welivesecurity.com/wp-content/themes/welivesecurity/assets/favicon.ico",
                category: "global",
                tags: ["privacy", "malware", "security news"],
                lang: "en"
            }
        ];

        // Caricamento feed con sistema di fallback a 3 livelli
        async function loadFeed(source) {
            const container = document.getElementById(source.id);
            const timeout = 10000;
            
            try {
                // Tentativo 1: Proxy primario
                let response = await fetchWithTimeout(
                    `https://api.allorigins.win/raw?url=${encodeURIComponent(source.rss)}`, 
                    {}, 
                    timeout
                );
                
                // Tentativo 2: Proxy secondario se il primo fallisce
                if (!response.ok) {
                    response = await fetchWithTimeout(
                        `https://cors-anywhere.herokuapp.com/${source.rss}`, 
                        {}, 
                        timeout
                    );
                }
                
                // Tentativo 3: Direct fetch per fonti che supportano CORS
                if (!response.ok && source.rss.startsWith("https")) {
                    try {
                        response = await fetchWithTimeout(source.rss, {}, timeout);
                    } catch (e) {
                        console.log("Tentativo diretto fallito per CORS");
                    }
                }
                
                if (!response || !response.ok) {
                    throw new Error(`HTTP ${response?.status || 'no-response'}`);
                }
                
                const text = await response.text();
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(text, "text/xml");
                
                // Gestione errori del parser
                if (xmlDoc.querySelector("parsererror")) {
                    throw new Error("Errore nel parsing del feed XML");
                }
                
                let items = xmlDoc.querySelectorAll("item, entry");
                if (items.length === 0) {
                    throw new Error("Nessun articolo trovato nel feed");
                }
                
                displayItems(items, source);
                
            } catch (error) {
                console.error(`Errore per ${source.name}:`, error);
                showFallback(source, error.message);
                
                // Auto-riparazione: prova a ricaricare dopo 30 secondi
                setTimeout(() => {
                    if (container.querySelector('.error')) {
                        loadFeed(source);
                    }
                }, 30000);
            }
        }

        // Visualizzazione articoli con supporto per RSS e Atom
        async function displayItems(items, source) {
            const container = document.getElementById(source.id);
            container.querySelector('.loading')?.remove();
            
            // Mostriamo massimo 8 articoli per fonte
            const itemsToDisplay = Array.from(items).slice(0, 8);
            
            for (const item of itemsToDisplay) {
                const title = item.querySelector("title")?.textContent || "Notizia senza titolo";
                let link = item.querySelector("link")?.textContent || source.fallback;
                
                // Gestione speciale per i link in Atom
                if (!link.startsWith("http") && item.querySelector("link[href]")) {
                    link = item.querySelector("link[href]").getAttribute("href");
                }
                
                const pubDate = item.querySelector("pubDate, published, date")?.textContent || "";
                let description = item.querySelector("description, content, summary")?.textContent || "";
                
                // Pulizia della descrizione
                description = cleanDescription(description);
                
                const itemEl = document.createElement('div');
                itemEl.className = 'feed-item';
                itemEl.setAttribute('data-category', source.category);
                itemEl.setAttribute('data-tags', source.tags.join(','));
                itemEl.setAttribute('data-lang', source.lang);
                
                // Aggiungi tag lingua
                const langTag = `<span class="tag lang">${source.lang.toUpperCase()}</span>`;
                
                itemEl.innerHTML = `
                    <div class="item-title"><a href="${link}" target="_blank" rel="noopener noreferrer">${title}</a></div>
                    <div class="item-date">${formatDate(pubDate)} ${langTag}</div>
                    <div class="item-description" data-original="${escapeHtml(description)}">${description}</div>
                    <div class="item-tags">
                        ${source.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                `;
                
                container.appendChild(itemEl);
                
                // Se la traduzione √® attiva e l'articolo non √® in italiano, traduci
                if (document.getElementById('translateToggle').classList.contains('active') && source.lang !== 'it') {
                    await translateItem(itemEl, source.lang);
                }
            }
        }

        // Traduci un articolo
        async function translateItem(itemEl, sourceLang) {
            const titleLink = itemEl.querySelector('.item-title a');
            const descriptionEl = itemEl.querySelector('.item-description');
            const originalTitle = titleLink.textContent;
            const originalDesc = descriptionEl.dataset.original;
            
            try {
                // Controlla prima la cache
                const cacheKey = `${originalTitle}|${originalDesc}`;
                if (TRANSLATION_CACHE.has(cacheKey)) {
                    const [translatedTitle, translatedDesc] = TRANSLATION_CACHE.get(cacheKey);
                    applyTranslation(itemEl, translatedTitle, translatedDesc);
                    return;
                }
                
                // Mostra "Traduzione in corso..."
                descriptionEl.textContent = "Traduzione in corso...";
                
                // Usa il servizio di traduzione (qui usiamo un approccio ibrido)
                let translatedTitle, translatedDesc;
                
                if (DEEPL_API_KEY) {
                    // Usa DeepL API se disponibile
                    [translatedTitle, translatedDesc] = await translateWithDeepL(originalTitle, originalDesc, sourceLang);
                } else {
                    // Fallback a traduzione semplice (simulata)
                    [translatedTitle, translatedDesc] = await simulateTranslation(originalTitle, originalDesc);
                }
                
                // Salva nella cache
                TRANSLATION_CACHE.set(cacheKey, [translatedTitle, translatedDesc]);
                
                // Applica la traduzione
                applyTranslation(itemEl, translatedTitle, translatedDesc);
                
            } catch (error) {
                console.error("Errore nella traduzione:", error);
                descriptionEl.textContent = originalDesc;
                itemEl.querySelector('.item-date').innerHTML += 
                    ' <span class="translate-info">(Traduzione fallita)</span>';
            }
        }

        // Applica la traduzione all'elemento
        function applyTranslation(itemEl, translatedTitle, translatedDesc) {
            const titleLink = itemEl.querySelector('.item-title a');
            const descriptionEl = itemEl.querySelector('.item-description');
            
            titleLink.textContent = translatedTitle;
            descriptionEl.textContent = translatedDesc;
            
            // Aggiungi indicazione che √® tradotto
            itemEl.querySelector('.item-date').innerHTML += 
                ' <span class="translate-info">(Tradotto)</span>';
            
            // Cambia il tag lingua
            const langTag = itemEl.querySelector('.tag.lang');
            if (langTag) {
                langTag.textContent = 'IT';
                langTag.title = 'Tradotto da ' + langTag.textContent;
            }
        }

        // Traduzione con DeepL API (richiede API key)
        async function translateWithDeepL(text, text2, sourceLang) {
            if (!DEEPL_API_KEY) {
                throw new Error("DeepL API key non configurata");
            }
            
            const endpoint = "https://api-free.deepl.com/v2/translate";
            const params = new URLSearchParams();
            params.append('auth_key', DEEPL_API_KEY);
            params.append('source_lang', sourceLang.toUpperCase());
            params.append('target_lang', 'IT');
            params.append('text', text);
            params.append('text', text2);
            
            const response = await fetch(`${endpoint}?${params.toString()}`, {
                method: 'POST'
            });
            
            if (!response.ok) {
                throw new Error(`DeepL API error: ${response.status}`);
            }
            
            const data = await response.json();
            return [data.translations[0].text, data.translations[1].text];
        }

        // Simulazione di traduzione (per demo senza API key)
        async function simulateTranslation(title, description) {
            // Simula un ritardo di rete
            await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 1000));
            
            // Simula una traduzione approssimativa
            const translatedTitle = `[Tradotto] ${title}`;
            const translatedDesc = `[Traduzione simulata] ${description.substring(0, 100)}...`;
            
            return [translatedTitle, translatedDesc];
        }

        // Messaggio di fallback migliorato
        function showFallback(source, reason = "") {
            const container = document.getElementById(source.id);
            container.querySelector('.loading')?.remove();
            
            const fallbackHtml = `
                <div class="error">
                    <strong>Attenzione:</strong> Impossibile caricare i contenuti ${reason && `(${reason})`}
                </div>
                <div class="fallback-link">
                    Visita direttamente <a href="${source.fallback}" target="_blank">${source.name}</a>
                </div>
                <div style="margin-top:10px; font-size:0.8em;">
                    <small>Feed RSS: <a href="${source.rss}" target="_blank">${source.rss}</a></small>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', fallbackHtml);
        }

        // Helper: fetch con timeout
        function fetchWithTimeout(url, options, timeout) {
            return Promise.race([
                fetch(url, options),
                new Promise((_, reject) =>
                    setTimeout(() => reject(new Error('Timeout')), timeout)
                )
            ]);
        }

        // Formattazione dati con supporto per pi√π formati di data
        function formatDate(dateString) {
            if (!dateString) return 'Data non disponibile';
            
            try {
                // Prova a parsare come ISO string o RFC2822
                let date = new Date(dateString);
                
                // Se il parsing fallisce, prova a pulire la stringa
                if (isNaN(date.getTime())) {
                    const cleaned = dateString.replace(/\(.*\)/, '').trim();
                    date = new Date(cleaned);
                }
                
                // Se ancora non valida, ritorna la stringa originale
                if (isNaN(date.getTime())) {
                    return dateString;
                }
                
                return date.toLocaleDateString('it-IT', { 
                    day: 'numeric', 
                    month: 'long', 
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            } catch {
                return dateString;
            }
        }

        function cleanDescription(description) {
            if (!description) return '';
            
            // Rimuovi tag HTML e immagini
            const div = document.createElement('div');
            div.innerHTML = description;
            
            // Rimuovi script e stili
            const scripts = div.querySelectorAll('script, style');
            scripts.forEach(script => script.remove());
            
            let text = div.textContent || div.innerText || '';
            text = text.replace(/\s+/g, ' ').trim();
            
            return text.length > 150 ? text.substring(0, 150) + '...' : text;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Filtraggio per categoria
        function setupCategoryFilter() {
            const buttons = document.querySelectorAll('#categoryFilter button');
            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    buttons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    const category = button.dataset.category;
                    filterItemsByCategory(category);
                });
            });
        }

        function filterItemsByCategory(category) {
            const items = document.querySelectorAll('.feed-item');
            
            items.forEach(item => {
                if (category === 'all' || item.dataset.category === category || 
                    item.dataset.tags.includes(category)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Attiva/disattiva traduzione
        function setupTranslateToggle() {
            const toggleBtn = document.getElementById('translateToggle');
            toggleBtn.addEventListener('click', async () => {
                toggleBtn.classList.toggle('active');
                
                if (toggleBtn.classList.contains('active')) {
                    toggleBtn.textContent = 'Disattiva traduzione';
                    
                    // Traduci tutti gli articoli in inglese
                    const englishItems = document.querySelectorAll('.feed-item[data-lang="en"]');
                    for (const item of englishItems) {
                        await translateItem(item, 'en');
                    }
                } else {
                    toggleBtn.textContent = 'Attiva traduzione automatica';
                    
                    // Ripristina gli articoli originali
                    const translatedItems = document.querySelectorAll('.feed-item');
                    translatedItems.forEach(item => {
                        const originalDesc = item.querySelector('.item-description')?.dataset.original;
                        if (originalDesc) {
                            item.querySelector('.item-description').textContent = originalDesc;
                        }
                        
                        // Rimuovi indicatori di traduzione
                        const translateInfo = item.querySelector('.translate-info');
                        if (translateInfo) translateInfo.remove();
                        
                        // Ripristina tag lingua
                        const langTag = item.querySelector('.tag.lang');
                        if (langTag) langTag.textContent = 'EN';
                    });
                }
            });
        }

        // Inizializzazione
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('feedContainer');
            
            // Creazione dinamica delle colonne con indicatori di stato
            CYBER_NEWS_SOURCES.forEach(source => {
                const column = document.createElement('div');
                column.className = 'feed-column';
                column.id = source.id;
                column.setAttribute('data-category', source.category);
                
                column.innerHTML = `
                    <div class="feed-title">
                        <img src="${source.icon}" alt="${source.name} icon" 
                             onerror="this.src='https://via.placeholder.com/24/3498db/ffffff?text=${source.name[0]}'">
                        ${source.name}
                    </div>
                    <div class="loading">
                        <div class="loading-spinner"></div>
                        Verifica fonte in corso...
                    </div>
                `;
                
                container.appendChild(column);
                
                // Delay differenziato per evitare rate limiting
                setTimeout(() => loadFeed(source), Math.random() * 3000);
            });
            
            setupCategoryFilter();
            setupTranslateToggle();
            
            // Controllo periodico delle fonti (ogni 6 ore)
            setInterval(() => {
                document.querySelectorAll('.feed-column').forEach(col => {
                    const sourceId = col.id;
                    const source = CYBER_NEWS_SOURCES.find(s => s.id === sourceId);
                    if (source && col.querySelector('.error')) {
                        loadFeed(source);
                    }
                });
            }, 6 * 60 * 60 * 1000);
        });
    </script>
</body>
</html>
